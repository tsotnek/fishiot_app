The simplest way is to use device_credentials_installer.py script and connect to device with UART
and automatically install credentials. 


*IMPORTANT to edit the script in line 587 to just "ser = serial.Serial(port, 115200, timeout=serial_timeout)"



*RUN FOLLOWING PYTHON3 COMMAND FROM THE LOCATION OF SCRIPT
*Important to enter correct COM port

python3 device_credentials_installer.py -d --ca my_ca/ca.pem --ca_key my_ca/prv.pem --verify --port COM10





This script will also generate the provision.csv file which will be used to provision the device to the server




Afterwards just provision with curl POST command 

curl -X POST $API_HOST/v1/devices \
--data-binary @$PATH_TO_CSV_FILE \
-H "Content-Type: application/octet-stream" \
-H "Authorization: Bearer $API_KEY"





and then we need to create a csv file using just the ID and public key to later register the public key using 

curl -X POST $API_HOST/v1/devices/public-keys \
--data-binary @$PATH_TO_CSV_FILE \
-H "Content-Type: application/octet-stream" \
-H "Authorization: Bearer $API_KEY"